<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Breathing Debug Test</title>
    <style>
      :root {
        --md-sys-color-primary: #006a6b;
        --md-sys-color-primary-container: #6ff7f8;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background: #f5f5f5;
        font-family: Arial, sans-serif;
      }

      .debug-container {
        text-align: center;
        padding: 40px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .breathing-circle {
        width: 160px;
        height: 160px;
        border: 4px solid var(--md-sys-color-primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--md-sys-color-primary-container);
        position: relative;
        box-shadow: 0 0 20px rgba(0, 106, 107, 0.3);
        margin: 0 auto 20px;
      }

      /* Test with simple CSS transitions first */
      .breathing-circle.simple-test {
        transition: transform 2s ease-in-out, box-shadow 2s ease-in-out;
      }

      .breathing-circle.simple-test.scale-up {
        transform: scale(1.3);
        box-shadow: 0 0 40px rgba(0, 106, 107, 0.5);
      }

      .breathing-circle.simple-test.scale-down {
        transform: scale(0.8);
        box-shadow: 0 0 10px rgba(0, 106, 107, 0.2);
      }

      /* Test with keyframe animations */
      @keyframes testScaleUp {
        from {
          transform: scale(1);
          box-shadow: 0 0 20px rgba(0, 106, 107, 0.3);
        }
        to {
          transform: scale(1.3);
          box-shadow: 0 0 40px rgba(0, 106, 107, 0.5);
        }
      }

      @keyframes testScaleDown {
        from {
          transform: scale(1.3);
          box-shadow: 0 0 40px rgba(0, 106, 107, 0.5);
        }
        to {
          transform: scale(0.8);
          box-shadow: 0 0 10px rgba(0, 106, 107, 0.2);
        }
      }

      .breathing-circle.keyframe-test.animate-up {
        animation: testScaleUp 2s ease-in-out forwards;
      }

      .breathing-circle.keyframe-test.animate-down {
        animation: testScaleDown 2s ease-in-out forwards;
      }

      .controls {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      button {
        padding: 10px 15px;
        border: none;
        border-radius: 8px;
        background: var(--md-sys-color-primary);
        color: white;
        cursor: pointer;
        font-size: 12px;
      }

      button:hover {
        opacity: 0.9;
      }

      .status {
        margin-top: 20px;
        padding: 10px;
        background: #f0f0f0;
        border-radius: 8px;
        font-family: monospace;
        font-size: 12px;
        text-align: left;
        max-height: 200px;
        overflow-y: auto;
      }
    </style>
  </head>
  <body>
    <div class="debug-container">
      <h2>Breathing Animation Debug Test</h2>
      <div class="breathing-circle" id="circle"></div>

      <div class="controls">
        <button onclick="reset()">Reset</button>
        <button onclick="testTransitionUp()">Transition Scale Up</button>
        <button onclick="testTransitionDown()">Transition Scale Down</button>
        <button onclick="testKeyframeUp()">Keyframe Scale Up</button>
        <button onclick="testKeyframeDown()">Keyframe Scale Down</button>
        <button onclick="testInlineAnimation()">Inline Animation</button>
        <button onclick="runFullCycle()">Full Cycle Test</button>
      </div>

      <div class="status" id="status">Ready for testing...</div>
    </div>

    <script>
      const circle = document.getElementById("circle");
      const status = document.getElementById("status");

      function log(message) {
        const timestamp = new Date().toLocaleTimeString();
        status.innerHTML += `[${timestamp}] ${message}<br>`;
        status.scrollTop = status.scrollHeight;
        console.log(message);
      }

      function reset() {
        circle.className = "breathing-circle";
        circle.style.animation = "";
        circle.style.transition = "";
        circle.style.transform = "";
        log("Reset circle to default state");
      }

      function testTransitionUp() {
        reset();
        circle.classList.add("simple-test");
        setTimeout(() => {
          circle.classList.add("scale-up");
          log("Applied transition scale up");
        }, 50);
      }

      function testTransitionDown() {
        reset();
        circle.classList.add("simple-test");
        setTimeout(() => {
          circle.classList.add("scale-down");
          log("Applied transition scale down");
        }, 50);
      }

      function testKeyframeUp() {
        reset();
        circle.classList.add("keyframe-test");
        setTimeout(() => {
          circle.classList.add("animate-up");
          log("Applied keyframe animation up");
        }, 50);
      }

      function testKeyframeDown() {
        reset();
        circle.classList.add("keyframe-test");
        setTimeout(() => {
          circle.classList.add("animate-down");
          log("Applied keyframe animation down");
        }, 50);
      }

      function testInlineAnimation() {
        reset();
        circle.style.animation = "testScaleUp 2s ease-in-out forwards";
        log("Applied inline animation style");
      }

      function runFullCycle() {
        reset();
        log("Starting full cycle test...");

        let step = 0;
        const steps = [
          () => {
            circle.style.animation = "testScaleUp 2s ease-in-out forwards";
            log("Step 1: Scale up");
          },
          () => {
            circle.style.animation = "testScaleDown 2s ease-in-out forwards";
            log("Step 2: Scale down");
          },
          () => {
            circle.style.animation = "testScaleUp 1s ease-in-out forwards";
            log("Step 3: Scale up (faster)");
          },
          () => {
            reset();
            log("Step 4: Reset - Cycle complete");
          },
        ];

        function nextStep() {
          if (step < steps.length) {
            steps[step]();
            step++;
            setTimeout(nextStep, 2500);
          }
        }

        nextStep();
      }

      // Test browser compatibility
      log("Browser: " + navigator.userAgent);
      log(
        "CSS Animation support: " +
          (CSS.supports("animation", "test 1s") ? "YES" : "NO")
      );
      log(
        "CSS Transform support: " +
          (CSS.supports("transform", "scale(1.5)") ? "YES" : "NO")
      );
      log(
        "CSS Transition support: " +
          (CSS.supports("transition", "transform 1s") ? "YES" : "NO")
      );
    </script>
  </body>
</html>
